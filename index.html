<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/2.3.0/alpine.js"></script>
    <title>Assets icon JW by Gandhi</title>
</head>
<body>
    <div class="container mx-auto">
        <div class="max-w-4xl bg-indigo-50 mx-auto my-20 p-6 rounded">
            <div x-data="{ tab: window.location.hash ? window.location.hash.substring(1) : 'description' }" id="tab_wrapper">
                <!-- The tabs navigation -->
                <nav class="flex items-center gap-6 border-b-2 border-indigo-400 p-4">
                  <a :class="{ 'active': tab === 'description' }" @click.prevent="tab = 'description'; window.location.hash = 'description'" href="#">General</a>
                  <a :class="{ 'active': tab === 'reviews' }" @click.prevent="tab = 'reviews'; window.location.hash = 'reviews'" href="#">Domain</a>
                  <a :class="{ 'active': tab === 'reviews' }" @click.prevent="tab = 'reviews'; window.location.hash = 'reviews'" href="#">Hosting</a>
                  <a :class="{ 'active': tab === 'reviews' }" @click.prevent="tab = 'reviews'; window.location.hash = 'reviews'" href="#">VPS</a>
                  <div class="w-full">
                      <input class="w-full p-2 rounded" type="text" name="search" placeholder="cari icon.." id="filter_icon">
                  </div>
                </nav>
              
                <!-- The tabs content -->
                <div class="py-6">
                    <div x-show="tab === 'description'">
                        <ul id="icon-lists">

                        </ul>
                    </div>
                      <div x-show="tab === 'reviews'">
                        Lorem ipsum reviews.
                      </div x-show="tab === 'reviews'">
                        
                </div>

              
              </div>
        </div>
        
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script >
        const firebaseConfig = {
            apiKey: "AIzaSyBDudzEybSvMn31N6VKPGza7S3PVuvaXrE",
            authDomain: "iconlists-5b0e1.firebaseapp.com",
            databaseURL: "https://iconlists-5b0e1-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "iconlists-5b0e1",
            storageBucket: "iconlists-5b0e1.appspot.com",
            messagingSenderId: "334807808938",
            appId: "1:334807808938:web:851945c823c419f6de09d3",
            measurementId: "G-XMVG4EHWCR"
        };
      
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        const dbRef = firebase.database().ref();
        const iconlists = dbRef.child('iconlists');
        iconlistsUI = document.getElementById('icon-lists');
        iconlists.on("child_added", showData, showErr);
        // iconlists.on("child_added", snap => {
        // });
        function showData(item){
            let icon = item.val();
            // let icon = snap.val();
            let name = icon.name;
            let url = icon.url;
            let cat = icon.cat;
            // let name = icon.child(1).val()
            
            let $li = document.createElement('li');

            iconlistsUI.append($li);
            let $card = document.createElement('div');
            $li.append($card)
                        // $li.innerHTML = "name";
            // li.setAttribute();
            // let $svg = document.createElement('object'); 
            // let $p = document.createElement('p');
            // $p.innerHTML = name;
            // for
            for (const [key, value] of Object.entries({
                class: 'flex bg-white w-full my-4 p-4 gap-6 items-center shadow-md hover:shodow-lg border-0 hover:border-2 border-indigo-600 transform scale-90 rounded-2xl',
            })) {
                $card.setAttribute(key, value);
            }
            //
            let $icon = document.createElement('div'); 
            $card.append($icon);
            for (const [key, value] of Object.entries({
                class: 'w-1/12 bg-green-50 border-2 border-green-100 rounded p-1',
            })) {
                $icon.setAttribute(key, value);
            }
            //
            let $name = document.createElement('div'); 
            $card.append($name);
            $name.innerHTML = '<p class="font-semibold">' + name + '</p> <p>' + cat +'</p>';
            for (const [key, value] of Object.entries({
                class: 'w-9/12',
            })) {
                $name.setAttribute(key, value);
            }

            let $btn = document.createElement('div');
            $card.append($btn);
            $btn.innerHTML = '<div class="flex items-center"><p>Copy Link</p><p>Download</p></div>';
            for (const [key, value] of Object.entries({
                class: 'w-2/12 bg-indigo-200',
            })) {
                $btn.setAttribute(key, value);
            }

            // iconlistsUI.append($p);
            $svg = document.createElement('img');
            for (const [key, value] of Object.entries({
                // type: 'image/svg+xml',
                class: '',
                // data: url
                src: url
            })) {
                $svg.setAttribute(key, value);
            }
            $icon.append($svg);

            $ul = document.getElementById("icon-lists");
            $input = document.getElementById("filter_icon");

            var filterIcon = function(event){
              keyword = $input.value.toLowerCase();
              console.log(keyword);
              if (name.includes(keyword) || cat.includes(keyword)) {
                $li.style.display = 'block';  
              } else {
                $li.style.display = 'none';  
                        
              }
            }
            $input.addEventListener('keyup', filterIcon);

            
        }

        function showErr(err){
            console.log(err);
        } 
      </script>
</body>
</html>